import { GameBoard } from '../src/gameBoard';

it('boardGenerated', () => {
  const board = new GameBoard();
  expect(board.board).toEqual([
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
  ]);
});

it('ship placed', () => {
  const board = new GameBoard();
  board.placeShip(3, 1, 1);
  expect(board.board).toEqual([
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, 0, 0, 0, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
  ]);
});

it('attack hits', () => {
  const board = new GameBoard();
  board.placeShip(3, 1, 1);
  board.receiveAttack(1, 2);
  board.placeShip(3, 1, 1);
  board.receiveAttack(1, 2);
  board.receiveAttack(1, 1);
  board.receiveAttack(1, 3);
  expect(board.board).toEqual([
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, 'hit', 'hit', 'hit', -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
  ]);
});

it('all ships sunk', () => {
  const board = new GameBoard();
  board.placeShip(3, 1, 1);
  board.receiveAttack(1, 2);
  board.receiveAttack(1, 1);
  board.receiveAttack(1, 3);
  expect(board.allSunk()).toEqual(true);
});
